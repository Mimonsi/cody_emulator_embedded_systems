10 REM Conways Game of Life
11 W=40
12 H=20
20 X=0
30 Y=0
40 S=0
43 PRINT CHR$(224,222)
50 GOSUB 1000
51 GOSUB 9000
60 GOSUB 3000
70 GOSUB 2000
71 IF S=2 THEN GOTO 200
80 IF S=1 THEN GOTO 90
81 GOTO 51
90 GOSUB 9000
91 GOSUB 4000
92 GOSUB 2000
100 IF S=2 THEN GOTO 200
101 IF S=1 THEN GOTO 51
110 GOTO 90
200 PRINT CHR$(230,222)
210 POKE 53250,OR(AND(PEEK(53250), 240), 7)
900 END
1000 REM Border auf schwarz setzen
1010 POKE 53250,OR(AND(PEEK(53250), 240), 0)
1020 FOR J=0 TO H-1
1030 FOR I=0 TO W-1
1031 POKE 41984+I+(J+5)*W,1
1040 NEXT
1050 NEXT
1100 RETURN
2000 REM Feld zeichnen
2020 FOR J=0 TO H-1
2030 FOR I=0 TO W-1
2031 C=PEEK(41984+I+(J+5)*W)
2033 IF X<>I THEN GOTO 2039
2034 IF Y<>J THEN GOTO 2039
2035 IF S=1 THEN GOTO 2039
2036 IF MOD(TI/30,2)=0 THEN GOTO 2039
2037 C=5
2039 POKE 55296+I+(J+5)*W,C
2040 POKE 50176+I+(J+5)*W,146
2051 NEXT
2060 NEXT
2070 RETURN
3000 REM Pfeiltasten pr√ºfen
3010 IF AND(PEEK(16+6),1)=0 THEN Y=MOD(Y-1,H)
3020 IF AND(PEEK(16+6),2)=0 THEN Y=MOD(Y+1,H)
3030 IF AND(PEEK(16+6),4)=0 THEN X=MOD(X-1,W)
3040 IF AND(PEEK(16+6),8)=0 THEN X=MOD(X+1,W)
3050 IF AND(PEEK(16+4),16)=0 THEN GOTO 3060
3051 GOTO 3070
3060 IF PEEK(55296+X+(Y+5)*W)=1 THEN POKE 41984+X+(Y+5)*W,2
3061 IF PEEK(55296+X+(Y+5)*W)=2 THEN POKE 41984+X+(Y+5)*W,1
3070 IF AND(PEEK(16),1)=0 THEN IF AND(PEEK(16+2),1)=0 THEN GOSUB 10000
3071 IF AND(PEEK(16+2),1)=0 THEN IF AND(PEEK(16+5),1)=0 THEN GOSUB 11000
3080 IF AND(PEEK(16+3),2)=0 THEN GOSUB 20000
3200 RETURN
4000 REM Game Loop
4010 FOR J=0 TO H-1
4020 FOR I=0 TO W-1
4030 D=55296+I+(J+5)*W
4040 E=0
4050 IF PEEK(D+(-1-1*W))=2 THEN E=E+1
4051 IF PEEK(D+(0-1*W))=2 THEN E=E+1
4052 IF PEEK(D+(1-1*W))=2 THEN E=E+1
4053 IF PEEK(D+(-1+0*W))=2 THEN E=E+1
4054 IF PEEK(D+(1+0*W))=2 THEN E=E+1
4055 IF PEEK(D+(-1+1*W))=2 THEN E=E+1
4056 IF PEEK(D+(0+1*W))=2 THEN E=E+1
4057 IF PEEK(D+(1+1*W))=2 THEN E=E+1
4060 REM POKE 50176+I+(J+5)*W,48+E
4070 IF PEEK(D)<>2 THEN GOTO 4300
4080 REM Wenn sie lebt
4090 IF E=2 THEN GOTO 4200
4100 IF E=3 THEN GOTO 4200
4110 REM stirbt
4120 POKE 41984+I+(J+5)*W,1
4130 GOTO 4500
4200 REM ueberlebt
4210 POKE 41984+I+(J+5)*W,2
4220 GOTO 4500
4300 REM Wenn sie nicht lebt
4310 IF E=3 THEN GOTO 4400
4320 REM Bleibt tot
4330 POKE 41984+I+(J+5)*W,1
4340 GOTO 4500
4400 REM wird lebendig
4410 POKE 41984+I+(J+5)*W,2
4500 NEXT
4510 NEXT
4900 RETURN
9000 REM Titel und Hilfe
9020 PRINT AT(6,0),"*** Conways Game of Life ***"
9021 PRINT AT(30,2),"Zeit: ",TI/60
9050 PRINT AT(0,3),"Q: Quit, C: Clear, P: Play, D: Draw"
9060 IF AND(PEEK(16),1)=0 THEN IF AND(PEEK(16+2),1)=1 THEN S=2
9070 IF AND(PEEK(16+5),16)=0 THEN S=1
9080 IF AND(PEEK(16+1),2)=0 THEN S=0
9900 RETURN
10000 REM Template 1
10010 POKE 41984+10+(10+5)*W,2
10011 POKE 41984+11+(10+5)*W,2
10012 POKE 41984+12+(10+5)*W,2
10013 POKE 41984+12+(9+5)*W,2
10014 POKE 41984+11+(8+5)*W,2
10900 RETURN
11000 REM Template 2
11010 POKE 41984+11+(10+5)*W,2
11011 POKE 41984+12+(10+5)*W,2
11012 POKE 41984+13+(10+5)*W,2
11013 POKE 41984+14+(10+5)*W,2
11014 POKE 41984+10+(11+5)*W,2
11015 POKE 41984+14+(11+5)*W,2
11016 POKE 41984+14+(12+5)*W,2
11017 POKE 41984+10+(13+5)*W,2
11018 POKE 41984+13+(13+5)*W,2
11900 RETURN
20000 REM Clear
20010 FOR J=0 TO H-1
20020 FOR I=0 TO W-1
20030 POKE 41984+I+(J+5)*W,1
20700 NEXT
20710 NEXT
20900 RETURN

